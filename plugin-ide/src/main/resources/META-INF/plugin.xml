<idea-plugin>
    <id>com.prestoxbasopp</id>
    <name>Presto Xbase++</name>
    <vendor email="support@prestoxbasopp.com" url="https://example.com">PrestoXbasoPlusPlus</vendor>
    <description><![CDATA[
        IntelliJ IDEA support for the xbase++ language with syntax highlighting, diagnostics,
        completion, navigation, structure view, formatting, folding, and rename refactoring.
        A bundled <code>user_guide.html</code> is included for onboarding and feature details.
    ]]></description>
    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">
        <moduleType id="XBASEPP_MODULE"
                    implementationClass="com.prestoxbasopp.ide.modules.XbModuleType" />
        <fileType name="Xbase++ File"
                  language="Xbase++"
                  extensions="xb;prg;ch"
                  implementationClass="com.prestoxbasopp.ide.XbFileType" />
        <fileType name="XPJ Project"
                  language="TEXT"
                  extensions="xpj"
                  implementationClass="com.prestoxbasopp.ide.xpj.XpjFileType" />
        <fileType name="DBF File"
                  language="TEXT"
                  extensions="dbf"
                  implementationClass="com.prestoxbasopp.ide.dbf.DbfFileType" />
        <fileEditorProvider implementation="com.prestoxbasopp.ide.xpj.XpjProjectFileEditorProvider" />
        <fileEditorProvider implementation="com.prestoxbasopp.ide.dbf.DbfFileEditorProvider" />
        <lang.parserDefinition language="Xbase++"
                               implementationClass="com.prestoxbasopp.ide.XbParserDefinition" />
        <lang.syntaxHighlighterFactory language="Xbase++"
                                       implementationClass="com.prestoxbasopp.ide.XbSyntaxHighlighterFactory" />
        <lang.psiStructureViewFactory language="Xbase++"
                                      implementationClass="com.prestoxbasopp.ide.XbStructureViewBuilderFactory" />
        <lang.foldingBuilder language="Xbase++"
                             implementationClass="com.prestoxbasopp.ide.XbFoldingBuilder" />
        <langCodeStyleSettingsProvider
                implementation="com.prestoxbasopp.ide.XbLanguageCodeStyleSettingsProvider" />
        <completion.contributor language="Xbase++"
                                implementationClass="com.prestoxbasopp.ide.XbCompletionContributor" />
        <editorFactoryListener implementation="com.prestoxbasopp.ide.XbIfBlockHighlighter" />
        <formattingService implementation="com.prestoxbasopp.ide.XbFormattingService" />
        <toolWindow id="Xbase++ Macros"
                    anchor="left"
                    factoryClass="com.prestoxbasopp.ide.XbMacroExpansionToolWindowFactory" />
        <toolWindow id="Xbase++ AST"
                    anchor="left"
                    factoryClass="com.prestoxbasopp.ide.XbAstToolWindowFactory" />
        <toolWindow id="Ultra DBF Master"
                    anchor="right"
                    factoryClass="com.prestoxbasopp.ide.dbf.UltraDbfMasterToolWindowFactory" />
        <gotoDeclarationHandler implementation="com.prestoxbasopp.ide.XbGotoDeclarationHandler" />
        <renameHandler implementation="com.prestoxbasopp.ide.XbRenameHandler" />
        <refactoringSupportProvider language="Xbase++"
                                    implementationClass="com.prestoxbasopp.ide.XbRefactoringSupportProvider" />
        <localInspection language="Xbase++"
                         implementationClass="com.prestoxbasopp.ide.XbInspectionTool" />
        <applicationConfigurable id="com.prestoxbasopp.settings"
                                 displayName="xbase++ Settings"
                                 instance="com.prestoxbasopp.ide.XbSettingsConfigurable" />
        <startupActivity implementation="com.prestoxbasopp.ide.modules.XbModuleStartupActivity" />
        <configurationType implementation="com.prestoxbasopp.ide.debug.XbDebuggerRunConfigurationType" />
    </extensions>

    <actions>
        <action id="com.prestoxbasopp.ide.dbf.ReverseEngineerDbfAction"
                class="com.prestoxbasopp.ide.dbf.ReverseEngineerDbfAction"
                text="Reverse Engineer DBF"
                description="Open Ultra DBF Master reverse-engineering workflow">
            <add-to-group group-id="ToolsMenu" anchor="last" />
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last" />
            <add-to-group group-id="EditorPopupMenu" anchor="last" />
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt shift R" />
        </action>
    </actions>

</idea-plugin>
